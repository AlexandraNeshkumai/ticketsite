title = "Event"
url = "/event/:slug"
layout = "default"
is_hidden = 0

[ProductPage]
slug = "{{ :slug }}"
slug_required = 1
smart_url_check = 1
skip_error = 0

[formSubscribe]
urlToUnsubscribe = "unsubscribe"
urlToProfile = "subscriber-profile"
geo = "disabled"
thanksMessage = "Thanks for subscribe!"
errorMessage = "Email already exists!"

[commentsPost]

==
<!-- Страница мероприятия -->
{% set obProduct = ProductPage.get() %}

<div>
    <div data-id="{{ obProduct.id }}">
        <h1>{{ obProduct.name }}</h1>

        {% if obProduct.preview_image is not empty %}
            <img src="{{ obProduct.preview_image.path }}" title="{{ obProduct.preview_image.title }}" width=500 alt="{{ obProduct.preview_image.description }}">
        {% endif %}

        {% if obProduct.images is not empty %}
            {% for image in obProduct.images %}
                <img src="{{ image.path }}" title="{{ image.title }}" width=500 alt="{{ image.description }}">
            {% endfor %}
        {% endif %}

        <div>{{ obProduct.description|raw }}</div>

        {% set obOffer = obProduct.offer.first() %}

        {% if obOffer.isNotEmpty()%}  
            <span>Цена: {{ obOffer.price }} {{ obOffer.currency }}</span>
        {% endif %}
    </div>
    <hr>

     <!-- Покупка -->
    <script>
        function ButtonAddToCart() {
            var data = {
            'cart': [
                {'offer_id': obOffer.id, 'quantity': 1, 'property': {'double_cheese': true}},
            ]
        };

        //Send ajax request and update cart items
        $.request('Cart::onAdd', {
            'data': data,
            'update': {'cart-items': '.cart-item-wrapper'}
        });

        }
        
    </script>

    <a href="{{ 'order'|page }}"><button onclick="ButtonAddToCart()">Добавить в корзину</button></a>
    

        {% component 'commentsPost' %}
    </div>